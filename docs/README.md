# 設計書（記憶最優先・LLM中心）

この `docs/` は、CocoroGhost の「記憶」を中心に再設計した**現行設計**です。
過去の設計書は `docs/old/` にあります（参照用であり、この設計の前提にはしません）。

## 目的

- **記憶品質を最優先**にする（人間に近い「思い出し方」と「育ち方」）
- 忘れない（削除は基本しない）が、**新しさは検索順位に効かせる**
- 体感速度のため **SSE を継続**する（ストリーム開始までに「必要な記憶」を確定する）
- 検索（思い出す）は **計画はルールで固定**しつつ、**最終選別はLLMで品質最優先**（2段、必要なら多段）

## 非ゴール

- 旧DBのマイグレーション（運用前のため不要）
- 管理APIの後方互換（運用前のため不要）

## 読む順番（おすすめ）

1. `docs/00_はじめに.md`
2. `docs/01_全体像.md`
3. `docs/10_実行フロー.md`（同期/非同期のつながり + 観測ポイント）
4. `docs/02_記憶モデル.md`（記憶 + 感情 + 時間モデル）
5. `docs/04_検索（思い出す）.md`
6. `docs/05_記憶更新（育てる）.md`（WritePlan + 記憶整理）
7. `docs/06_ストレージ（SQLite）.md`
8. `docs/07_API.md`
9. `docs/12_画像付きチャット.md`
10. `docs/13_WebブラウザUI.md`（Web UI 概要 + 実装メモ）
